<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Road Explorer</title>
    <link rel="stylesheet" href="index.css">
    <!-- Particle.js Library -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
</head>
<body>
    <!-- Particle.js Container -->
    <div id="particles-js"></div>
    
    <header>
        <nav class="navbar">
            <div class="logo">Road Explorer</div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#" onclick="showContactMessage()">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1 class="gradient">Road Ready Explorer</h1>
            <p>Know Your Roads, Travel with Confidence. üöó Check road conditions before you go!</p>
        </div>
    </section>
    
    <div class="banner">
        <div class="banner-content">
            <span> Check Road Conditions!  Stay Safe & Plan Your Journey. </span>
            <span> Check Road Conditions!  Stay Safe & Plan Your Journey. </span>
        </div>
    </div>
    
    <section id="about" class="about">
        <div class="about-text">
            <h2>About Us!!!</h2>
            <p>At Road Explorer, we use advanced artificial intelligence to detect road defects like potholes and cracks in real time, improving safety and efficiency. Our AI-powered system analyzes images from cameras, drones, and satellite feeds to identify problem areas, helping authorities take quick action before minor issues become major hazards. By automating defect detection, we eliminate the need for manual inspections, reducing costs and improving accuracy. Our data-driven insights enable cities and transportation agencies to optimize repair schedules and enhance road infrastructure. With a focus on innovation and sustainability, Road Explorer is committed to making roads safer and smarter for everyone.</p>
            <span class="ripple"></span>
        </div>
    </section>
    
    <div class="banner2">
        <div class="banner-content">
            <span> Check Road Conditions!  Stay Safe & Plan Your Journey. </span>
            <span> Check Road Conditions!  Stay Safe & Plan Your Journey. </span>
        </div>
    </div>
    
    <section id="services" class="service">
        <div class="service-vertical">
            <div class="vertical-banner">
                <div class="vertical-content">
                    <p>üöó Check Road Conditions!</p>
                    <p>üö¶ Stay Safe & Plan Your Journey.</p>
                    <p>üõ£Ô∏è Avoid Traffic & Bad Roads.</p>
                    <p>üìç Get Real-Time Updates!</p>
                    <p>üöó Check Live Road Conditions!</p>
                    <p>üö¶ Stay Safe & Plan Your Journey.</p>
                </div>
            </div>
        </div>
        <div class="service-upload">
            <h2>Upload The Image To Analyze</h2>
            <label for="imageInput" class="upload-label">Select File To Upload</label>
            <input type="file" id="imageInput" accept="image/*">
            <br>
            <img id="preview" alt="Image Preview">
            <button id="analyzeBtn" class="analyze-button">Analyze Road</button>
            <div id="analysisResult"></div>
        </div>
    </section>
    
    <footer class="end">
        <div class="footer-container">
            <div class="footer-column">
                <h3>Created By</h3>
                <p>Kumar Shreyash</p>
                <p>23BCE1882</p>
                <p>Clovis</p>
                <p>23BCE1866</p>
                <p>Navine</p>
                <p>23BCE1949</p>
            </div>
            <div class="footer-column">
                <h3>MENU</h3>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#about">About Us</a></li>
                    <li><a href="#services">Services</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>RECENT Projects</h3>
                <ul>
                    <li><a href="#">Web Calculator</a></li>
                    <li><a href="#">Web Battle Ship Game</a></li>
                    <li><a href="#">Web Snakes And Ladder</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h3>JOIN US</h3>
                <form>
                    <input type="email" placeholder="Your email address" required>
                    <button type="button" onclick="submitForm()">SIGN UP</button>
                </form>
                <div class="social-icons">
                    <a href="#"><img src="https://img.icons8.com/?size=100&id=8808&format=png&color=FFFFFF" alt="Shreyash_LinkedIn">Shreyash</a>
                    <a href="#"><img src="https://img.icons8.com/?size=100&id=8808&format=png&color=FFFFFF" alt="Clovis_LinkedIn">Clovis</a>
                    <a href="#"><img src="https://img.icons8.com/?size=100&id=8808&format=png&color=FFFFFF" alt="Navin_LinkedIn">Navin</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p><strong>Web Project</strong></p>
            <p>¬© 2023 Batch. Built using HTML, CSS and <a href="https://www.javascript.com/">JavaScript</a></p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Contact message function
        function showContactMessage() {
            alert("Thank you for reaching out! We'll get back to you soon.");
        }
        
        // Image preview function
        document.getElementById("imageInput").addEventListener("change", function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const previewImage = document.getElementById("preview");
                    previewImage.src = e.target.result;
                    previewImage.style.display = "block";
                    
                    // Enable analyze button when image is loaded
                    document.getElementById("analyzeBtn").disabled = false;
                    
                    // Clear previous results
                    document.getElementById("analysisResult").style.display = "none";
                };
                reader.readAsDataURL(file);
            }
        });
        
        // Email signup function
        function submitForm() {
            const message = "Thank You For Your Interest";
            alert(message);
        }
        
        // Enhanced particles.js initialization
        document.addEventListener('DOMContentLoaded', function() {
            particlesJS('particles-js', {
                "particles": {
                    "number": {
                        "value": 80,
                        "density": {
                            "enable": true,
                            "value_area": 800
                        }
                    },
                    "color": {
                        "value": "#ffffff"
                    },
                    "shape": {
                        "type": "circle",
                        "stroke": {
                            "width": 0,
                            "color": "#000000"
                        }
                    },
                    "opacity": {
                        "value": 0.5,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 1,
                            "opacity_min": 0.1,
                            "sync": false
                        }
                    },
                    "size": {
                        "value": 3,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 2,
                            "size_min": 0.1,
                            "sync": false
                        }
                    },
                    "line_linked": {
                        "enable": true,
                        "distance": 150,
                        "color": "#ffffff",
                        "opacity": 0.4,
                        "width": 1
                    },
                    "move": {
                        "enable": true,
                        "speed": 3,
                        "direction": "none",
                        "random": true,
                        "straight": false,
                        "out_mode": "bounce",
                        "bounce": true,
                        "attract": {
                            "enable": true,
                            "rotateX": 600,
                            "rotateY": 1200
                        }
                    }
                },
                "interactivity": {
                    "detect_on": "window",
                    "events": {
                        "onhover": {
                            "enable": true,
                            "mode": "grab"
                        },
                        "onclick": {
                            "enable": true,
                            "mode": "push"
                        },
                        "resize": true
                    },
                    "modes": {
                        "grab": {
                            "distance": 140,
                            "line_linked": {
                                "opacity": 1
                            }
                        },
                        "bubble": {
                            "distance": 200,
                            "size": 20,
                            "duration": 0.4
                        },
                        "repulse": {
                            "distance": 100,
                            "duration": 0.4
                        },
                        "push": {
                            "particles_nb": 4
                        },
                        "remove": {
                            "particles_nb": 2
                        }
                    }
                },
                "retina_detect": true
            });

            // Initialize analyze button as disabled
            document.getElementById("analyzeBtn").disabled = true;
        });

        // Convert file to base64
        function toBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result.split(',')[1]);
                reader.onerror = error => reject(error);
            });
        }

        // Analyze image with Imagga API (FREE tier)
        async function analyzeImageWithImagga(base64Image) {
            // These are demo credentials - for real use, sign up at imagga.com for your own
            const apiKey = 'acc_d32ac1386a7f2a7';
            const apiSecret = '4f8c999abbec197d356f09807929878e';
            
            const auth = btoa(`${apiKey}:${apiSecret}`);
            
            const response = await fetch('https://api.imagga.com/v2/tags', {
                method: 'POST',
                headers: {
                    'Authorization': `Basic ${auth}`
                },
                body: new URLSearchParams({
                    image_base64: base64Image
                })
            });
            
            if (!response.ok) {
                throw new Error(`API request failed with status ${response.status}`);
            }
            
            const data = await response.json();
            return data.result.tags;
        }

        // Analyze road condition based on tags (simplified version)
        function analyzeRoadCondition(tags) {
            // Keywords that indicate bad road conditions
            const badRoadKeywords = [
                'pothole', 'crack', 'damage', 'uneven', 'bump', 
                'rough', 'broken', 'debris', 'gravel', 'dirt road'
            ];
            
            // Keywords that indicate good road conditions
            const goodRoadKeywords = [
                'smooth', 'paved', 'asphalt', 'concrete', 'highway',
                'road', 'street', 'clean', 'flat', 'modern'
            ];
            
            let badScore = 0;
            let goodScore = 0;
            
            tags.forEach(tag => {
                const tagName = tag.tag.en.toLowerCase();
                const confidence = tag.confidence;
                
                if (badRoadKeywords.some(keyword => tagName.includes(keyword))) {
                    badScore += confidence;
                } else if (goodRoadKeywords.some(keyword => tagName.includes(keyword))) {
                    goodScore += confidence;
                }
            });
            
            // Determine result (simplified to just return the condition)
            if (badScore > goodScore) {
                return 'Bad';
            } else if (goodScore > badScore) {
                return 'Good';
            } else {
                return 'Average';
            }
        }

        // Display the simplified result
        function showResult(condition) {
            const resultDiv = document.getElementById('analysisResult');
            let resultClass = '';
            let icon = '';
            
            if (condition === 'Good') {
                resultClass = 'good-result';
                icon = '‚úÖ';
            } else if (condition === 'Bad') {
                resultClass = 'bad-result';
                icon = '‚ö†Ô∏è';
            } else {
                resultClass = 'neutral-result';
                icon = '‚ÑπÔ∏è';
            }
            
            resultDiv.innerHTML = `${icon} Road Condition: ${condition}`;
            resultDiv.className = resultClass;
            resultDiv.style.display = 'block';
        }

        // Handle analyze button click
        document.getElementById("analyzeBtn").addEventListener("click", async function() {
            const file = document.getElementById("imageInput").files[0];
            if (!file) {
                alert("Please upload an image first!");
                return;
            }
            
            const analyzeBtn = document.getElementById("analyzeBtn");
            const originalText = analyzeBtn.textContent;
            
            try {
                // Show loading state
                analyzeBtn.disabled = true;
                analyzeBtn.textContent = "Analyzing...";
                
                // Get the image as base64
                const base64Image = await toBase64(file);
                
                // Call Imagga API for image tagging
                const tags = await analyzeImageWithImagga(base64Image);
                
                // Determine road condition based on tags
                const condition = analyzeRoadCondition(tags);
                
                // Display simplified result
                showResult(condition);
            } catch (error) {
                const resultDiv = document.getElementById('analysisResult');
                resultDiv.innerHTML = "Error analyzing image";
                resultDiv.className = 'bad-result';
                resultDiv.style.display = 'block';
            } finally {
                // Restore button state
                analyzeBtn.disabled = false;
                analyzeBtn.textContent = originalText;
            }
        });
    </script>
    <script src="main.js"></script>
</body>
</html>